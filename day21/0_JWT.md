# 21일차

## JWT를 통한 회원 인증 시스템 구현하기

- JWT(JSON Web Token) : 데이터가 JSON으로 이루어져 있는 토큰을 의미
- 사용자의 로그인 상태를 처리하는데 사용할 수 있는 대표적인 두 가지 인증 방식이 있음

1. 세션 기반 인증 시스템

- 사용자가 로그인을 하면, 서버는 세션 저장소에 사용자의 정보를 조회하고 세션 id를 발급함 \
  -> 발급된 id는 주로 브라우저의 쿠키에 저장 \
  -> 사용자가 다른 요청을 보낼 때마다 서버는 세션 저장소에서 세션을 조회한 후 로그인 여부를 결정하여 작업을 처리하고 응답
- 서버를 확장하기가 번거롭다는 것이 단점

2. 토큰 기반 인증 시스템

- 토큰 : 로그인 이후 서버가 만들어 주는 문자열로 사용자의 로그인 정보가 들어있고, 해당 정보가 서버에서 발급되었음을 증명하는 서명이 들어있음
  - 서명 데이터는 해싱 알고리즘을 통해 만듬(HMAC SHA256 혹은 RSA SHA256)
- 서버에서 만들어준 토큰은 서명이 있기 때문에 무결성이 보장 \
  \* 무결성 : 정보가 변경되거나 위조되지 않았음을 의미하는 성질
- 사용자가 로그인을 하면 서버에서 사용자에게 해당 사용자의 정보를 지니고 있는 토큰 발급 \
  -> 사용자가 다른 API를 요청하게 될 때 발급받은 토큰과 함께 요청 \
  -> 서버는 해당 토큰이 유효한지 검사하고, 결과에 따라 작업을 처리하고 응답
- 서버에서 사용자 로그인 정보를 기억하기 위해 사용하는 리소시가 적다는 것이 장점

### User 스키마/모델 만들기

> /blog/blog-backend/src/models/user.js

- 비밀번호를 데이터베이스에 저장할 때 플레임(가공x) 텍스트로 저장하면 보안상 매우 위험 \
  -> 따라서 단방향 해싱 함수를 지원해주는 bcrypt 라이브러리를 사용하여 안전하게 저장
- 모델 메서드 : 모델에서 사용할 수 있는 함수
  1. 인스턴스 메서드 : 모델을 통해 만든 문서 인스턴스에서 사용할 수 있는 함수
  2. 스태틱(static) 메서드 : 모델에서 바로 사용할 수 있는 함수
